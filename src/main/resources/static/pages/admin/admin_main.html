<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理界面</title>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="../../plugins/elementui/index.css">

    <link rel="stylesheet" href="../../plugins/font-awesome/css/font-awesome.min.css">

    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
<div id="app">
    <div class="content-header">
        <h1>后台管理</h1>
    </div>
    <div class="box">
        <!--新增按钮-->
        <el-button type="primary" @click="addItem1">新增</el-button>
        <!--新增水果的列表-->
        <el-dialog
                title="新增水果"
                :visible.sync="dialogVisible"
                width="30%"
                :before-close="handleClose">

            <el-form ref="form" :model="addItemList" label-width="80px">
                <el-form-item label="品牌名称">
                    <el-input v-model="addItemList.name"></el-input>
                </el-form-item>

                <el-form-item label="企业名称">
                    <el-input v-model="addItemList.prime"></el-input>
                </el-form-item>

                <el-form-item label="排序">
                    <el-input v-model="addItemList.url1"></el-input>
                </el-form-item>


                <el-form-item>
                    <el-button type="primary" @click="addItem1">提交</el-button>
                    <el-button @click="dialogVisible = false">取消</el-button>
                </el-form-item>
            </el-form>



            <span slot="footer" class="dialog-footer">
                <el-button @click="dialogVisible = false">取 消</el-button>
                <el-button type="primary" @click="dialogVisible = false">确 定</el-button>
            </span>
        </el-dialog>

        <!--展示表单-->
        <template>
            <el-table
                    :data="tableData"
                    stripe
                    style="width: 100%">
                <el-table-column
                        prop="name"
                        label="水果名"
                        align="center">
                </el-table-column>
                <el-table-column
                        prop="price"
                        label="价格"
                        align="center">
                </el-table-column>
                <el-table-column
                        prop="url1"
                        align="center"
                        label="图片地址">
                </el-table-column>
                <el-table-column
                        align="center"
                        label="操作">
                    <template slot-scope="scope">
                        <el-row>
                            <el-button type="primary" @click="change1(scope.row)">修改</el-button>
                            <!--<el-button type="danger" @click="deleteById(scope.row.id)">删除</el-button>-->
                            <el-button type="danger" @click="open(scope.row.id)">删除</el-button>
                        </el-row>
                    </template>
                </el-table-column>
            </el-table>
        </template>
    </div>
</div>
</body>
<!-- 引入组件库 -->

<script src="../../js/vue.js"></script>

<script src="../../plugins/elementui/index.js"></script>

<!--<script type="text/javascript" src="../js/jquery.min.js"></script>-->

<script src="../../js/axios-0.18.0.js"></script>

<script>
    var vue = new Vue({
        el: '#app',
        data: {
            //水果列表
            tableData: [],
            //新增的水果列表
            addItemList: {
                name: '',
                prime: '',
                url1: '',
            },
            //新增表单是否可见
            dialogVisible: false,
        },
        methods: {
            //获取水果列表
            getAll() {
                axios.get("/items").then((res) => {
                    if (res.data.code == 20041) {
                        this.tableData = res.data.data;
                        console.log(res.data)
                    } else {
                        this.$message({
                            message: res.data.msg,
                            type: 'warning'
                        });
                    }
                });
            },
            //新增水果
            addItem1() {
                this.dialogVisible = true;
            },
            //新增水果
            addItem2() {

            }
        },
        //钩子函数，VUE对象初始化完成后自动执行
        mounted() {
            this.getAll();
        }
    })
</script>
</html>